!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).ReduxSagaEffects={})}(this,function(t){"use strict";function n(){return(n=Object.assign||function(t){for(var n=1;arguments.length>n;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}var e=function(t){return"@@redux-saga/"+t},r=e("CANCEL_PROMISE"),o=e("IO"),a=e("MULTICAST"),u=e("SELF_CANCELLATION");function f(t,n){var e;void 0===n&&(n=!0);var o=new Promise(function(r){e=setTimeout(r,t,n)});return o[r]=function(){clearTimeout(e)},o}var c=function(t){return null==t},i=function(t){return null!=t},l=function(t){return"function"==typeof t},v=function(t){return"string"==typeof t},d=Array.isArray,p=function t(n){return n&&(v(n)||h(n)||l(n)||d(n)&&n.every(t))},y=function(t){return t&&l(t.take)&&l(t.close)},s=function(t){return l(t)&&t.hasOwnProperty("toString")},h=function(t){return!!t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype},q=function(t){return y(t)&&t[a]},S=function(t){return t},A=function(t){throw t},C=function(t){return{value:t,done:!0}};var E="TAKE",g="PUT",x="ALL",L="RACE",T="CALL",m="CPS",b="FORK",N="JOIN",O="CANCEL",U="SELECT",_="ACTION_CHANNEL",k="CANCELLED",w="FLUSH",I="GET_CONTEXT",P="SET_CONTEXT",R=Object.freeze({__proto__:null,TAKE:E,PUT:g,ALL:x,RACE:L,CALL:T,CPS:m,FORK:b,JOIN:N,CANCEL:O,SELECT:U,ACTION_CHANNEL:_,CANCELLED:k,FLUSH:w,GET_CONTEXT:I,SET_CONTEXT:P}),j=function(t,n){var e;return(e={})[o]=!0,e.combinator=!1,e.type=t,e.payload=n,e},F=function(t){return j(b,n({},t.payload,{detached:!0}))};function H(t,n){return void 0===t&&(t="*"),p(t)?j(E,{pattern:t}):q(t)&&i(n)&&p(n)?j(E,{channel:t,pattern:n}):y(t)?j(E,{channel:t}):void 0}function K(t,n){return c(n)&&(n=t,t=void 0),j(g,{channel:t,action:n})}function M(t){var n=j(L,t);return n.combinator=!0,n}function X(t,n){var e,r=null;return l(t)?e=t:(d(t)?(r=t[0],e=t[1]):(r=t.context,e=t.fn),r&&v(e)&&l(r[e])&&(e=r[e])),{context:r,fn:e,args:n}}function D(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;n>r;r++)e[r-1]=arguments[r];return j(T,X(t,e))}function G(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;n>r;r++)e[r-1]=arguments[r];return j(b,X(t,e))}function J(t){return void 0===t&&(t=u),j(O,t)}function z(t,n){return j(_,{pattern:t,buffer:n})}var B=D.bind(null,f),Q=function(t){return{done:!0,value:t}},V={};function W(t){return y(t)?"channel":s(t)?t+"":l(t)?t.name:t+""}function Y(t,n,e){var r,o,a,u=n;function f(n,e){if(u===V)return Q(n);if(e&&!o)throw u=V,e;r&&r(n);var f=e?t[o](e):t[u]();return a=f.effect,r=f.stateUpdater,o=f.errorState,(u=f.nextState)===V?Q(n):a}return function(t,n,e){void 0===n&&(n=A),void 0===e&&(e="iterator");var r={meta:{name:e},next:t,throw:n,return:C,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}(f,function(t){return f(null,t)},e)}function Z(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),o=2;e>o;o++)r[o-2]=arguments[o];var a,u={done:!1,value:H(t)},f=function(t){return a=t};return Y({q1:function(){return{nextState:"q2",effect:u,stateUpdater:f}},q2:function(){return{nextState:"q1",effect:(t=a,{done:!1,value:G.apply(void 0,[n].concat(r,[t]))})};var t}},"q1","takeEvery("+W(t)+", "+n.name+")")}function $(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),o=2;e>o;o++)r[o-2]=arguments[o];var a,u,f={done:!1,value:H(t)},c=function(t){return{done:!1,value:G.apply(void 0,[n].concat(r,[t]))}},i=function(t){return{done:!1,value:J(t)}},l=function(t){return a=t},v=function(t){return u=t};return Y({q1:function(){return{nextState:"q2",effect:f,stateUpdater:v}},q2:function(){return a?{nextState:"q3",effect:i(a)}:{nextState:"q1",effect:c(u),stateUpdater:l}},q3:function(){return{nextState:"q1",effect:c(u),stateUpdater:l}}},"q1","takeLatest("+W(t)+", "+n.name+")")}function tt(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),o=2;e>o;o++)r[o-2]=arguments[o];var a,u={done:!1,value:H(t)},f=function(t){return a=t};return Y({q1:function(){return{nextState:"q2",effect:u,stateUpdater:f}},q2:function(){return{nextState:"q1",effect:(t=a,{done:!1,value:D.apply(void 0,[n].concat(r,[t]))})};var t}},"q1","takeLeading("+W(t)+", "+n.name+")")}var nt="Channel's Buffer overflow!",et=1,rt=3,ot=4;var at=function(t){return function(t,n){void 0===t&&(t=10);var e=Array(t),r=0,o=0,a=0,u=function(n){e[o]=n,o=(o+1)%t,r++},f=function(){if(0!=r){var n=e[a];return e[a]=null,r--,a=(a+1)%t,n}},c=function(){for(var t=[];r;)t.push(f());return t};return{isEmpty:function(){return 0==r},put:function(f){var i;if(t>r)u(f);else switch(n){case et:throw Error(nt);case rt:e[o]=f,a=o=(o+1)%t;break;case ot:i=2*t,e=c(),r=e.length,o=e.length,a=0,e.length=i,t=i,u(f)}},take:f,flush:c}}(t,rt)};function ut(t,n,e){for(var r=arguments.length,o=Array(r>3?r-3:0),a=3;r>a;a++)o[a-3]=arguments[a];var u,f,c={done:!1,value:z(n,at(1))},i={done:!1,value:B(t)},l=function(t){return u=t},v=function(t){return f=t};return Y({q1:function(){return{nextState:"q2",effect:c,stateUpdater:v}},q2:function(){return{nextState:"q3",effect:{done:!1,value:H(f)},stateUpdater:l}},q3:function(){return{nextState:"q4",effect:(t=u,{done:!1,value:G.apply(void 0,[e].concat(o,[t]))})};var t},q4:function(){return{nextState:"q2",effect:i}}},"q1","throttle("+W(n)+", "+e.name+")")}function ft(t,n,e){for(var r=t,o=arguments.length,a=Array(o>3?o-3:0),u=3;o>u;u++)a[u-3]=arguments[u];var f={done:!1,value:D.apply(void 0,[e].concat(a))},c={done:!1,value:B(n)};return Y({q1:function(){return{nextState:"q2",effect:f,errorState:"q10"}},q2:function(){return{nextState:V}},q10:function(t){if(0>=(r-=1))throw t;return{nextState:"q1",effect:c}}},"q1","retry("+e.name+")")}function ct(t,n,e){for(var r=arguments.length,o=Array(r>3?r-3:0),a=3;r>a;a++)o[a-3]=arguments[a];var u,f,c={done:!1,value:H(n)},i={done:!1,value:M({action:H(n),debounce:B(t)})},l=function(t){return u=t},v=function(t){return f=t};return Y({q1:function(){return{nextState:"q2",effect:c,stateUpdater:l}},q2:function(){return{nextState:"q3",effect:i,stateUpdater:v}},q3:function(){return f.debounce?{nextState:"q1",effect:(n=u,{done:!1,value:G.apply(void 0,[e].concat(o,[n]))})}:{nextState:"q2",effect:(t=f.action,{done:!1,value:t}),stateUpdater:l};var t,n}},"q1","debounce("+W(n)+", "+e.name+")")}t.actionChannel=z,t.all=function(t){var n=j(x,t);return n.combinator=!0,n},t.apply=function(t,n,e){return void 0===e&&(e=[]),j(T,X([t,n],e))},t.call=D,t.cancel=J,t.cancelled=function(){return j(k,{})},t.cps=function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;n>r;r++)e[r-1]=arguments[r];return j(m,X(t,e))},t.debounce=function(t,n,e){for(var r=arguments.length,o=Array(r>3?r-3:0),a=3;r>a;a++)o[a-3]=arguments[a];return G.apply(void 0,[ct,t,n,e].concat(o))},t.delay=B,t.effectTypes=R,t.flush=function(t){return j(w,t)},t.fork=G,t.getContext=function(t){return j(I,t)},t.join=function(t){return j(N,t)},t.put=K,t.putResolve=function(){var t=K.apply(void 0,arguments);return t.payload.resolve=!0,t},t.race=M,t.retry=function(t,n,e){for(var r=arguments.length,o=Array(r>3?r-3:0),a=3;r>a;a++)o[a-3]=arguments[a];return D.apply(void 0,[ft,t,n,e].concat(o))},t.select=function(t){void 0===t&&(t=S);for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;n>r;r++)e[r-1]=arguments[r];return j(U,{selector:t,args:e})},t.setContext=function(t){return j(P,t)},t.spawn=function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;n>r;r++)e[r-1]=arguments[r];return F(G.apply(void 0,[t].concat(e)))},t.take=H,t.takeEvery=function(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),o=2;e>o;o++)r[o-2]=arguments[o];return G.apply(void 0,[Z,t,n].concat(r))},t.takeLatest=function(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),o=2;e>o;o++)r[o-2]=arguments[o];return G.apply(void 0,[$,t,n].concat(r))},t.takeLeading=function(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),o=2;e>o;o++)r[o-2]=arguments[o];return G.apply(void 0,[tt,t,n].concat(r))},t.takeMaybe=function(){var t=H.apply(void 0,arguments);return t.payload.maybe=!0,t},t.throttle=function(t,n,e){for(var r=arguments.length,o=Array(r>3?r-3:0),a=3;r>a;a++)o[a-3]=arguments[a];return G.apply(void 0,[ut,t,n,e].concat(o))},Object.defineProperty(t,"__esModule",{value:!0})});
