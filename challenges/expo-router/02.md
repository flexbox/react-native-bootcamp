# Passing data with Dynamic Routes

## üì° What you will learn

- Use dynamic routes with `[param]` syntax.
- Read `params` using the `useLocalSearchParams` hook.

## üëæ Before we start the exercise

- Check the [Dynamic routes documentation](https://docs.expo.dev/router/create-pages/#dynamic-routes).
- Check the [useLocalSearchParams documentation](https://docs.expo.dev/router/reference/hooks/#uselocalsearchparams).

## üë®‚ÄçüöÄ Exercise 2

### Create a dynamic route for starship details

Go to your `app/` folder:

- [ ] Create a new file `app/starship/[id].tsx` for the starship details screen.

The `[id]` in the filename creates a dynamic route that can match any value.

```
app/
  _layout.tsx
  index.tsx
  terms.tsx
  starships.tsx
  starship/
    [id].tsx       ‚Üí /starship/1, /starship/2, etc.
```

- [ ] Update your `_layout.tsx` to include the new route:

```javascript
// app/_layout.tsx
import { Stack } from "expo-router";

export default function RootLayout() {
  return (
    <Stack screenOptions={{ headerShown: false }}>
      <Stack.Screen name="index" />
      <Stack.Screen name="terms" />
      <Stack.Screen name="starships" />
      <Stack.Screen name="starship/[id]" />
    </Stack>
  );
}
```

### Navigating to the details screen with params

- [ ] Go to `app/starships.tsx` and implement navigation with params:

```javascript
import { Link, useRouter } from "expo-router";

// Option 1: Using Link with href object
<Link
  href={{
    pathname: "/starship/[id]",
    params: { id: starship.id, name: starship.name }
  }}
>
  <Text>{starship.name}</Text>
</Link>

// Option 2: Using useRouter
function StarshipsScreen() {
  const router = useRouter();

  function handlePress(starship) {
    router.push({
      pathname: "/starship/[id]",
      params: {
        id: starship.id,
        name: starship.name,
        model: starship.model,
        // Pass any data you need
      }
    });
  }

  return (
    <TouchableOpacity onPress={() => handlePress(starship)}>
      <Text>{starship.name}</Text>
    </TouchableOpacity>
  );
}
```

- [ ] The header title for the starships list should be `Starships`.

### Create the details screen

- [ ] Go and create `app/starship/[id].tsx`:

<img src="https://raw.githubusercontent.com/flexbox/react-native-workshop/main/challenges/react-navigation/details-screen.png" alt="expo-router details screen" width="50%" height="50%" />

- [ ] Read the `params` using `useLocalSearchParams`:

```javascript
// app/starship/[id].tsx
import { useLocalSearchParams } from "expo-router";

export default function StarshipDetailsScreen() {
  const { id, name, model } = useLocalSearchParams();

  return (
    <View>
      <Text>Starship: {name}</Text>
      <Text>Model: {model}</Text>
    </View>
  );
}
```

**üî≠ Hint:** You can also use `useGlobalSearchParams` if you need to access params from parent routes.

You can use these components to make it pretty:

- [`DataTable`](https://callstack.github.io/react-native-paper/docs/components/DataTable/)
- [List.Section](https://callstack.github.io/react-native-paper/docs/components/List/ListSection)
- [Chip](https://callstack.github.io/react-native-paper/docs/components/Chip/)

## üëΩ Bonus

### Modal presentation

- [ ] Change the screen presentation to display as a modal:

```javascript
// app/_layout.tsx
<Stack.Screen
  name="starship/[id]"
  options={{
    presentation: "modal",
    headerShown: true,
  }}
/>
```

- [ ] Add a "close modal" Button with an icon:

```javascript
import { useRouter } from "expo-router";

function StarshipDetailsScreen() {
  const router = useRouter();

  return (
    <Button
      title="Close"
      onPress={() => router.dismiss()}
    />
  );
}
```

### Debugging

- [ ] Add [`expo-dev-tools`](https://docs.expo.dev/debugging/devtools-plugins/) to your project.
- [ ] Install `@dev-plugins/react-navigation` to inspect routes and params.

Start the project and open the `expo-dev-tools` with `?` and `shift + m` in your terminal to open the menu and select `@dev-plugins/react-navigation`.

Now you can navigate in your app and see the route and params.

### Typed params

With typed routes enabled, you can type your params:

```javascript
import { useLocalSearchParams } from "expo-router";

type StarshipParams = {
  id: string;
  name: string;
  model?: string;
};

export default function StarshipDetailsScreen() {
  const { id, name, model } = useLocalSearchParams<StarshipParams>();
  // ...
}
```
