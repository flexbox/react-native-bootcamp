{"version":3,"sources":["../../../src/tools/releaseChecker/index.ts"],"names":["releaseChecker","root","version","currentVersion","require","path","join","name","latestRelease","e","logger","debug"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;;AACA;;AACA;;;;AAHA;AAKe,eAAeA,cAAf,CAA8BC,IAA9B,EAA4C;AACzD,MAAI;AACF,UAAM;AAACC,MAAAA,OAAO,EAAEC;AAAV,QAA4BC,OAAO,CAACC,gBAAKC,IAAL,CACxC,mCAAqBL,IAArB,EAA2B,cAA3B,CADwC,EAExC,cAFwC,CAAD,CAAzC;;AAIA,UAAM;AAACM,MAAAA;AAAD,QAASH,OAAO,CAACC,gBAAKC,IAAL,CAAUL,IAAV,EAAgB,cAAhB,CAAD,CAAtB;;AACA,UAAMO,aAAa,GAAG,MAAM,+BAAiBD,IAAjB,EAAuBJ,cAAvB,CAA5B;;AAEA,QAAIK,aAAJ,EAAmB;AACjB,oCAAgBD,IAAhB,EAAsBC,aAAtB,EAAqCL,cAArC;AACD;AACF,GAXD,CAWE,OAAOM,CAAP,EAAU;AACV;AACA;AACAC,uBAAOC,KAAP,CACE,oDACE,oCAFJ;;AAIAD,uBAAOC,KAAP,CAAaF,CAAb;AACD;AACF","sourcesContent":["import path from 'path';\nimport {logger} from '@react-native-community/cli-tools';\n// @ts-ignore - JS file\nimport resolveNodeModuleDir from '../config/resolveNodeModuleDir';\nimport getLatestRelease from './getLatestRelease';\nimport printNewRelease from './printNewRelease';\n\nexport default async function releaseChecker(root: string) {\n  try {\n    const {version: currentVersion} = require(path.join(\n      resolveNodeModuleDir(root, 'react-native'),\n      'package.json',\n    ));\n    const {name} = require(path.join(root, 'package.json'));\n    const latestRelease = await getLatestRelease(name, currentVersion);\n\n    if (latestRelease) {\n      printNewRelease(name, latestRelease, currentVersion);\n    }\n  } catch (e) {\n    // We let the flow continue as this component is not vital for the rest of\n    // the CLI.\n    logger.debug(\n      'Cannot detect current version of React Native, ' +\n        'skipping check for a newer release',\n    );\n    logger.debug(e);\n  }\n}\n"]}