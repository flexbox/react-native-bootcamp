{"version":3,"sources":["../src/openURLMiddleware.ts"],"names":["openURLMiddleware","req","res","next","rawBody","Error","url","JSON","parse","logger","info","end","use","rawBodyMiddleware"],"mappings":";;;;;;;AAOA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;;;;AATA;;;;;;;AAWA;;;AAGA,SAASA,iBAAT,CACEC,GADF,EAEEC,GAFF,EAGEC,IAHF,EAIE;AACA,MAAI,CAACF,GAAG,CAACG,OAAT,EAAkB;AAChB,WAAOD,IAAI,CAAC,IAAIE,KAAJ,CAAU,sBAAV,CAAD,CAAX;AACD;;AACD,QAAM;AAACC,IAAAA;AAAD,MAAQC,IAAI,CAACC,KAAL,CAAWP,GAAG,CAACG,OAAf,CAAd;;AACAK,qBAAOC,IAAP,CAAa,WAAUJ,GAAI,KAA3B;;AACA,wCAAqBA,GAArB;AACAJ,EAAAA,GAAG,CAACS,GAAJ,CAAQ,IAAR;AACD;;eAEc,0BAAUC,GAAV,CAAcC,0BAAd,EAAiCD,GAAjC,CAAqCZ,iBAArC,C","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport http from 'http';\nimport {launchDefaultBrowser, logger} from '@react-native-community/cli-tools';\nimport connect from 'connect';\nimport rawBodyMiddleware from './rawBodyMiddleware';\n\n/**\n * Handle request from JS to open an arbitrary URL in Chrome\n */\nfunction openURLMiddleware(\n  req: http.IncomingMessage & {rawBody?: string},\n  res: http.ServerResponse,\n  next: (err?: any) => void,\n) {\n  if (!req.rawBody) {\n    return next(new Error('missing request body'));\n  }\n  const {url} = JSON.parse(req.rawBody);\n  logger.info(`Opening ${url}...`);\n  launchDefaultBrowser(url);\n  res.end('OK');\n}\n\nexport default connect().use(rawBodyMiddleware).use(openURLMiddleware);\n"]}